export ZSH="$HOME/.oh-my-zsh"
if [ -f "$ZSH/oh-my-zsh.sh" ]; then
  ZSH_THEME="alanpeabody"
  plugins=(git 
    zsh-autosuggestions
    extract
    zsh-wakatime
    fast-syntax-highlighting
  )
  source "$ZSH/oh-my-zsh.sh"
else
  echo "Warning: oh-my-zsh not found at $ZSH. Please run the installation script." >&2
fi

autoload -U compinit
compinit -i

# 如果 .profile.d 目录存在，则 source 所有
if [[ -d ~/.profile.d ]]; then
  for file in "$HOME/.profile.d"/*; do
    # 检查文件是否存在且是普通文件（不是目录）
    if [[ -f "$file" ]]; then
      source "$file"
    fi
  done
fi

# 如果 $HOME/opt 目录存在，遍历其子目录并添加 bin 到 PATH
if [[ -d "$HOME/opt" ]]; then
  for dir in "$HOME/opt"/*; do
    if [[ -d "$dir" ]] && [[ -d "$dir/bin" ]]; then
      export PATH="$dir/bin:$PATH"
    fi
  done
fi

COMP_WORDBREAKS=${COMP_WORDBREAKS/=/}
COMP_WORDBREAKS=${COMP_WORDBREAKS/@/}
export COMP_WORDBREAKS
